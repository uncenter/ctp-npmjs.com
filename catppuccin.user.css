/* ==UserStyle==
@name        NPM Catppuccin
@namespace   github.com/uncenter/ctp-npmjs.com
@homepageURL https://github.com/uncenter/ctp-npmjs.com
@version     0.0.1
@updateURL   https://github.com/uncenter/ctp-npmjs.com/raw/main/catppuccin.user.css
@description Soothing pastel theme for NPM
@author      uncenter
@license     MIT

@preprocessor less
@var select lightFlavor "Light Flavor" ["latte:Latte*", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha"]
@var select darkFlavor "Dark Flavor" ["latte:Latte", "frappe:Frappé", "macchiato:Macchiato", "mocha:Mocha*"]
@var select accentColor "Accent" ["rosewater:Rosewater", "flamingo:Flamingo", "pink:Pink", "mauve:Mauve", "red:Red", "maroon:Maroon", "peach:Peach", "yellow:Yellow", "green:Green", "teal:Teal", "blue:Blue", "sapphire:Sapphire*", "sky:Sky", "lavender:Lavender", "subtext0:Gray"]
==/UserStyle== */

@-moz-document domain("npmjs.com") {
	/* prettier-ignore */
	@catppuccin: {
      @latte:     { @rosewater: #dc8a78; @flamingo: #dd7878; @pink: #ea76cb; @mauve: #8839ef; @red: #d20f39; @maroon: #e64553; @peach: #fe640b; @yellow: #df8e1d; @green: #40a02b; @teal: #179299; @sky: #04a5e5; @sapphire: #209fb5; @blue: #1e66f5; @lavender: #7287fd; @text: #4c4f69; @subtext1: #5c5f77; @subtext0: #6c6f85; @overlay2: #7c7f93; @overlay1: #8c8fa1; @overlay0: #9ca0b0; @surface2: #acb0be; @surface1: #bcc0cc; @surface0: #ccd0da; @base: #eff1f5; @mantle: #e6e9ef; @crust: #dce0e8; };
      @frappe:    { @rosewater: #f2d5cf; @flamingo: #eebebe; @pink: #f4b8e4; @mauve: #ca9ee6; @red: #e78284; @maroon: #ea999c; @peach: #ef9f76; @yellow: #e5c890; @green: #a6d189; @teal: #81c8be; @sky: #99d1db; @sapphire: #85c1dc; @blue: #8caaee; @lavender: #babbf1; @text: #c6d0f5; @subtext1: #b5bfe2; @subtext0: #a5adce; @overlay2: #949cbb; @overlay1: #838ba7; @overlay0: #737994; @surface2: #626880; @surface1: #51576d; @surface0: #414559; @base: #303446; @mantle: #292c3c; @crust: #232634; };
      @macchiato: { @rosewater: #f4dbd6; @flamingo: #f0c6c6; @pink: #f5bde6; @mauve: #c6a0f6; @red: #ed8796; @maroon: #ee99a0; @peach: #f5a97f; @yellow: #eed49f; @green: #a6da95; @teal: #8bd5ca; @sky: #91d7e3; @sapphire: #7dc4e4; @blue: #8aadf4; @lavender: #b7bdf8; @text: #cad3f5; @subtext1: #b8c0e0; @subtext0: #a5adcb; @overlay2: #939ab7; @overlay1: #8087a2; @overlay0: #6e738d; @surface2: #5b6078; @surface1: #494d64; @surface0: #363a4f; @base: #24273a; @mantle: #1e2030; @crust: #181926; };
      @mocha:     { @rosewater: #f5e0dc; @flamingo: #f2cdcd; @pink: #f5c2e7; @mauve: #cba6f7; @red: #f38ba8; @maroon: #eba0ac; @peach: #fab387; @yellow: #f9e2af; @green: #a6e3a1; @teal: #94e2d5; @sky: #89dceb; @sapphire: #74c7ec; @blue: #89b4fa; @lavender: #b4befe; @text: #cdd6f4; @subtext1: #bac2de; @subtext0: #a6adc8; @overlay2: #9399b2; @overlay1: #7f849c; @overlay0: #6c7086; @surface2: #585b70; @surface1: #45475a; @surface0: #313244; @base: #1e1e2e; @mantle: #181825; @crust: #11111b;
      };
    }

	/*  Userstyle as Mixin
     *  This takes the following Parameters:
     *  @lookup – which is the desired Flavor
     *  @accent – which is the desired Accent Color */
	#catppuccin(@lookup, @accent) {
		@rosewater: @catppuccin[@@lookup][@rosewater];
		@flamingo: @catppuccin[@@lookup][@flamingo];
		@pink: @catppuccin[@@lookup][@pink];
		@mauve: @catppuccin[@@lookup][@mauve];
		@red: @catppuccin[@@lookup][@red];
		@maroon: @catppuccin[@@lookup][@maroon];
		@peach: @catppuccin[@@lookup][@peach];
		@yellow: @catppuccin[@@lookup][@yellow];
		@green: @catppuccin[@@lookup][@green];
		@teal: @catppuccin[@@lookup][@teal];
		@sky: @catppuccin[@@lookup][@sky];
		@sapphire: @catppuccin[@@lookup][@sapphire];
		@blue: @catppuccin[@@lookup][@blue];
		@lavender: @catppuccin[@@lookup][@lavender];
		@text: @catppuccin[@@lookup][@text];
		@subtext1: @catppuccin[@@lookup][@subtext1];
		@subtext0: @catppuccin[@@lookup][@subtext0];
		@overlay2: @catppuccin[@@lookup][@overlay2];
		@overlay1: @catppuccin[@@lookup][@overlay1];
		@overlay0: @catppuccin[@@lookup][@overlay0];
		@surface2: @catppuccin[@@lookup][@surface2];
		@surface1: @catppuccin[@@lookup][@surface1];
		@surface0: @catppuccin[@@lookup][@surface0];
		@base: @catppuccin[@@lookup][@base];
		@mantle: @catppuccin[@@lookup][@mantle];
		@crust: @catppuccin[@@lookup][@crust];
		@accent-color: @catppuccin[@@lookup][@@accent];

		& {
			background-color: @base !important;
		}

		& when not (@lookup = latte) {
			color-scheme: dark;
		}

		/* Primary background */
		.bg-white,
		._4ea0e50d,
		.cd2827bb {
			background-color: @base;
		}

		/* Background layer background */
		._7eb68a55,
		.e9998f88 {
			background-color: @mantle;
		}

		/* Primary text */
		._99e3854f,
		.c6c55db4,
		.black,
		.black-90,
		.black-80,
		._0b9b6c57,
		._1b8c0a9f,
		p {
			color: @text;
		}

		/* Secondary text */
		.black-70,
		.black-60,
		.cd2827bb a {
			color: @subtext0;
		}
		._66c2abad {
			color: @overlay0;
		}

		/* Inverse text */
		.white {
			color: @base;
		}

		header {
			border-bottom-color: @surface0;

			/* Top bar gradient */
			.e7070742 {
				border-image: linear-gradient(139deg, @peach, @maroon, @red, @pink) 3;
			}

			/* Heart icon */
			._0edb515f {
				color: @text;
			}

			/* Logo */
			a[href="/"] > svg > path {
				fill: @text;
			}

			/* Search box */
			form#search {
				button[type="submit"] {
					background-color: @subtext1;
				}

				& > div {
					border-color: @crust;

					&:focus-within {
						border-color: @subtext1;
					}

					& > div {
						background-color: @crust;

						span svg g[stroke="#777777"] {
							stroke: @subtext0;
						}

						input[type="search"] {
							&,
							&::placeholder {
								color: @overlay1;
							}

							&::-webkit-search-cancel-button {
								display: none;
							}
						}
					}

					ul[aria-label="Search results"] {
						li {
							border-bottom-color: @surface0;
							color: @text;
						}
					}
				}
			}

			/* Profile */
			nav > button[aria-label="Profile menu"] {
				/* Profile dropdown arrow */
				img[alt="avatar"] {
					border-color: @text;

					& + div > svg {
						fill: @text;
					}
				}

				/* Profile popup */
				+ span > div {
					border-color: @surface0;

					/* Popup triangle */
					&::after {
						border-bottom-color: @base;
					}
					&::before {
						border-bottom-color: @surface0;
					}

					/* Username */
					h2 {
						border-bottom-color: @surface1;
					}

					/* Navigation options */
					ul li a {
						&:hover,
						&:focus {
							background-color: @crust;
						}

						/* Red "Add Organization" button */
						&[href="/org/create"] {
							border-color: @surface0;
							color: @red;
							svg {
								fill: @red;
							}
						}
					}
				}
			}
		}

		/* Dividers and box borders */
		.f85080bd, /* Popular libraries section */
		.b--black-10 {
			border-color: @surface0;
			border-bottom-color: @surface0;
		}

		footer {
			a[href="https://github.com/npm"] svg
			{
				& > polygon {
					fill: @base;
				}

				& > rect {
					fill: @text;
				}
			}
			a[href="https://github.com"] svg
			{
				fill: @text;
			}
			&::after {
				background-image: linear-gradient(139deg, @peach, @maroon, @red, @pink);
			}
		}

		/* Discover packages section */
		ul[aria-labelledby="discover-packages-header"] {
			li a {
				color: @text;
				border-color: @surface0;
			}
			li:nth-of-type(6n + 1):hover a {
				color: @mauve;
				border-bottom-color: @mauve;
			}
			li:nth-of-type(6n + 2):hover a {
				color: @green;
				border-bottom-color: @green;
			}
			li:nth-of-type(6n + 3):hover a {
				color: @sky;
				border-bottom-color: @sky;
			}
			li:nth-of-type(6n + 4):hover a {
				color: @red;
				border-bottom-color: @red;
			}
			li:nth-of-type(6n + 5):hover a {
				color: @yellow;
				border-bottom-color: @yellow;
			}
			li:nth-of-type(6n + 6):hover a {
				color: @pink;
				border-bottom-color: @pink;
			}
		}

		/* Package "public" text */
		._813b53b2 {
			color: @green;
		}

		/* Package tabs */
		ul[aria-owns*="package-tab-"] {
			li {
				&:has([id="package-tab-readme"]) {
					border-color: @yellow;

					a {
						color: @yellow;
					}
				}
				&:has([id="package-tab-code"]),
				&:has([id="package-tab-admin"]) {
					border-color: @red;

					a {
						color: @red;

						.a17280e0 {
							color: @green;
						}
					}
				}
				&:has([id="package-tab-dependents"]) {
					border-color: @mauve;

					a {
						color: @mauve;
					}
				}
				&:has([id="package-tab-dependencies"]) {
					border-color: @pink;

					a {
						color: @pink;
					}
				}
				&:has([id="package-tab-versions"]) {
					border-color: @sapphire;

					a {
						color: @sapphire;
					}
				}
			}
		}

		/* Package page sidebar icons */
		._5cfc0900 svg,
		.b5be2af6 svg,
		.fbd04dd1 svg,
		[aria-labelledby="repository repository-link"] svg g {
			fill: @text;
		}

		/* Package sidebar provenance popup */
		button[aria-label="View more provenance details"] {
			& + div > div > div {
				background-color: @base;
				border-color: @surface0;

				&::after {
					border-bottom-color: @base;
				}

				&::before {
					border-bottom-color: @surface0;
				}

				& > div {
					div:nth-of-type(2) {
						border-color: @surface0;
					}
				}
			}
		}
		._1e07caeb {
			color: @text;
		}
		._9666fddd,
		._861fb12a,
		._2160593e {
			color: @subtext0;
		}
		/* Provenance icon */
		.f97c6116 {
			fill: @green;
		}
		/* Provenance section at bottom */
		#provenance-details-header + div {
			border-color: @surface0;
		}

		/* Package page sidebar text */
		.c84e15be {
			color: @subtext0;
		}
		/* Copy install command box */
		.d767adf4 p {
			border-color: @surface0;
		}

		/* Readme */
		#readme {
			a {
				color: @red;
			}
			h1,
			h2,
			h3,
			h4,
			h5,
			h6 {
				color: @text;
				a,
				svg {
					color: @text;
					fill: @text;
				}
			}
			p,
			li {
				color: @subtext0;
			}
			strong {
				color: @text;
			}
			pre,
			code {
				background-color: lighten(@surface0, 5%);
			}
			code {
				color: @text;
			}
			h1,
			h2 {
				border-bottom-color: @surface1;
			}
			h4 {
				border-bottom-color: @surface0;
			}
			blockquote {
				background-color: lighten(@surface0, 2%);
				border-left-color: @surface2;
			}
			table {
				color: @text;
				td,
				th {
					background-color: @base;
					border-color: @surface0;
				}
			}
		}

		/* Keywords, share feedback link */
		#user-content-keywords,
		#user-content-provenance a[href=" https://github.com/npm/feedback"]
		{
			color: @text;
		}

		/* Settings pages */
		._7fb5e603 h1 {
			color: @text;
		}
		#organizationsHeader + a[href="/org/create"] {
			color: @green;
			border-color: @green;

			&:hover {
				color: @mantle;
				background-color: @green;
			}
		}
		/* Left panel */
		aside.e9998f88 {
			box-shadow: none;

			ul.c63ae7fc li:hover {
				background-color: @crust;
			}
		}

		/* Generic buttons/button links */
		._24a1e9c7 {
			background-image: none;
			background-color: @surface0;
			color: @text;
			border: @surface1;

			&:hover {
				background-color: @surface1;
			}

			/* Danger */
			&._4a3f8f21 {
				& when (@lookup = latte) {
					background-color: lighten(@red, 30%);

					&:hover {
						background-color: lighten(@red, 25%);
					}
				}

				& when not (@lookup = latte) {
					background-color: @red;
					color: @surface1;

					&:hover {
						background-color: lighten(@red, 5%);
					}
				}
			}

			/* Success */
			&.c37751f6 {
				& when (@lookup = latte) {
					background-color: lighten(@green, 30%);

					&:hover {
						background-color: lighten(@green, 25%);
					}
				}

				& when not (@lookup = latte) {
					background-color: @green;
					color: @surface1;

					&:hover {
						background-color: lighten(@green, 5%);
					}
				}
			}
		}

		/* Edit profile settings */
		form[id="profile"] {
			input[id="profile_fullname"] {
				background-color: @surface0;
				&:focus {
					box-shadow: 0 0 0 2px @blue;
				}
			}
		}
		/* Email and password settings */
		p:has(+ div > a[href^="/settings/"][href$="/email"] + a[href^="/settings/"][href$="/password"]),
		/* Delete account */
		p:has(+ a[href^="/settings/"][href$="/delete-account"]) {
			color: @text;
		}

		details ul[class*="Dropdown__DropdownMenu"] {
			background-color: @base;
			border-color: @surface0;

			li a:hover {
				background-color: @mantle !important;
				color: @text !important;
			}
		}

		/* Access tokens settings */
		form[id="tokens"] {
			table {
				td {
					span {
						color: @subtext1;

						&:hover {
							color: @text;
						}
					}
					code {
						color: @subtext0;
					}
				}
				& + div {
					color: @text;
				}
			}
		}
	}

	@media (prefers-color-scheme: light) {
		:root {
			#catppuccin(@lightFlavor, @accentColor);
		}
	}
	@media (prefers-color-scheme: dark) {
		:root {
			#catppuccin(@darkFlavor, @accentColor);
		}
	}
}
